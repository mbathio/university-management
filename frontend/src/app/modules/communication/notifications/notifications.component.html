<!-- src/app/modules/communication/notifications/notifications.component.html -->
<div class="notifications-container">
  <div class="notifications-header">
    <h1>Annonces et notifications</h1>
    <button
      mat-raised-button
      color="primary"
      [routerLink]="['/communication/add']"
      *ngIf="true"
    >
      <mat-icon>add</mat-icon>
      Créer une annonce
    </button>
  </div>

  <div class="loading-spinner" *ngIf="loading">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <div class="error-message" *ngIf="error">
    {{ error }}
  </div>

  <div class="announcements-list" *ngIf="!loading && !error">
    <mat-card *ngIf="announcements.length === 0" class="no-announcements">
      <mat-card-content>
        <mat-icon>announcement</mat-icon>
        <p>Aucune annonce disponible</p>
      </mat-card-content>
    </mat-card>

    <mat-card
      *ngFor="let announcement of announcements"
      class="announcement-card"
    >
      <mat-card-header>
        <mat-card-title>{{ announcement.title }}</mat-card-title>
        <mat-card-subtitle>
          <span class="announcement-date">{{
            announcement.createdAt | date: "dd/MM/yyyy"
          }}</span>
          <span *ngIf="announcement.createdBy">
            • {{ announcement.createdBy.firstName }}
            {{ announcement.createdBy.lastName }}</span
          >
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>{{ announcement.content }}</p>
      </mat-card-content>
      <mat-card-actions align="end">
        <a mat-button [routerLink]="['/communication', announcement.id]"
          >Voir plus</a
        >
        <button
          mat-button
          *ngIf="announcement.fileUrl"
          (click)="downloadDocument(announcement.id)"
        >
          <mat-icon>file_download</mat-icon> Télécharger
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
