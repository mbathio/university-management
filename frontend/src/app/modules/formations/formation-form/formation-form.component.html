<!-- src/app/modules/formations/formation-form/formation-form.component.html -->
<div class="formation-form-container">
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ isEditMode ? 'Modifier' : 'Créer' }} une Formation</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <form [formGroup]="formationForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Nom de la formation</mat-label>
              <input matInput formControlName="name" placeholder="Ex. Master Informatique">
              <mat-error *ngIf="formationForm.get('name')?.hasError('required')">
                Le nom est requis
              </mat-error>
            </mat-form-field>
          </div>
          
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Type de formation</mat-label>
              <input matInput formControlName="type" placeholder="Ex. Initiale, Continue, Alternance">
              <mat-error *ngIf="formationForm.get('type')?.hasError('required')">
                Le type est requis
              </mat-error>
            </mat-form-field>
          </div>
          
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Niveau</mat-label>
              <input matInput formControlName="level" placeholder="Ex. Licence, Master, Doctorat">
              <mat-error *ngIf="formationForm.get('level')?.hasError('required')">
                Le niveau est requis
              </mat-error>
            </mat-form-field>
          </div>
          
          <div class="form-row date-fields">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Date de début</mat-label>
              <input matInput [matDatepicker]="startPicker" formControlName="startDate">
              <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
              <mat-datepicker #startPicker></mat-datepicker>
            </mat-form-field>
            
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Date de fin</mat-label>
              <input matInput [matDatepicker]="endPicker" formControlName="endDate">
              <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
              <mat-datepicker #endPicker></mat-datepicker>
            </mat-form-field>
          </div>
          
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Description</mat-label>
              <textarea matInput formControlName="description" rows="4" placeholder="Description du programme de formation"></textarea>
            </mat-form-field>
          </div>
          
          <div class="form-row funding-fields">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Montant du financement</mat-label>
              <input matInput formControlName="fundingAmount" type="number" min="0">
              <mat-error *ngIf="formationForm.get('fundingAmount')?.hasError('min')">
                Le montant ne peut pas être négatif
              </mat-error>
            </mat-form-field>
            
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Type de financement</mat-label>
              <input matInput formControlName="fundingType" placeholder="Ex. Public, Privé, Mixte">
            </mat-form-field>
          </div>
          
          <div class="form-actions">
            <button mat-button type="button" routerLink="/formations">Annuler</button>
            <button 
              mat-raised-button 
              color="primary" 
              type="submit" 
              [disabled]="formationForm.invalid || loading">
              {{ isEditMode ? 'Mettre à jour' : 'Créer' }}
            </button>
          </div>
        </form>
      </mat-card-content>
      
      <div class="loading-overlay" *ngIf="loading">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    </mat-card>
  </div>